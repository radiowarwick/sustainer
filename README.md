# Sustainer 2.0

This is a new version of the sustainer system which uses `liquidsoap`. This uses the API interface from [Digiplay Laravel](https://github.com/radiowarwick/digiplay-laravel/) so that we never directly talk to the database.

## Installation (developer environment) instructions

1. Make sure you have `liquidsoap` installed
2. `git clone https://github.com/radiowarwick/sustainer.git`
3. `cd sustainer`
4. `cp config.liq.example config.liq`
5. Fill `config.liq` with configuration values
6. Run using `liquidsoap script/sustainer.liq`

## Installing in production

1. Make sure you have `liquidsoap` installed
2. Clone the repo recursively `git clone https://github.com/radiowarwick/sustainer.git --recursive`. This ensures that you have `liquidsoap-daemonize` cloned.
3. Change into repository directory `cd sustainer`
4. Copy template configuration `cp script/config.liq.example script/config.liq`
5. Fill `script/config.liq` with configuration values
6. Install daemon using `./install.sh`
7. Modify any values in `script/sustainer-run.liq` if needed. This was auto-generated by liquidsoap-daemonize.
8. To uninstall run `./uninstall.sh`

### Daemon Management

The Daemon can be accessed using `service sustainer-liquidsoap <status|stop|start|restart>` on Debian systems.
The Daemon user needs to have permission to access the soundcard if using hardware output. For `alsa` this can be done by adding the Daemon user to the `audio` group.